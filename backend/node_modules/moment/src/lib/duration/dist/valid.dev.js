"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = isDurationValid;
exports.isValid = isValid;
exports.createInvalid = createInvalid;

var _hasOwnProp = _interopRequireDefault(require("../utils/has-own-prop"));

var _toInt = _interopRequireDefault(require("../utils/to-int"));

var _indexOf = _interopRequireDefault(require("../utils/index-of"));

var _create = require("./create");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var ordering = ['year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond'];

function isDurationValid(m) {
  var key,
      unitHasDecimal = false,
      i,
      orderLen = ordering.length;

  for (key in m) {
    if ((0, _hasOwnProp["default"])(m, key) && !(_indexOf["default"].call(ordering, key) !== -1 && (m[key] == null || !isNaN(m[key])))) {
      return false;
    }
  }

  for (i = 0; i < orderLen; ++i) {
    if (m[ordering[i]]) {
      if (unitHasDecimal) {
        return false; // only allow non-integers for smallest unit
      }

      if (parseFloat(m[ordering[i]]) !== (0, _toInt["default"])(m[ordering[i]])) {
        unitHasDecimal = true;
      }
    }
  }

  return true;
}

function isValid() {
  return this._isValid;
}

function createInvalid() {
  return (0, _create.createDuration)(NaN);
}